/* 
*      Robo Gallery     
*      Version: 3.1.16 - 28519
*      By Robosoft
*
*      Contact: https://robogallery.co/ 
*      Created: 2021
*      Licensed under the GPLv2 license - http://opensource.org/licenses/gpl-2.0.php

 */
!function(){var n,i,o,r,t="gallery-library",l=document.getElementById("robo_gallery_images_preview"),a=document.getElementsByClassName("roboGalleryFieldImagesButton");function s(e){var t=jQuery(l);jQuery.post(ajaxurl,{action:"robo_gallery_get_images_from_ids",idstring:e},function(e){t.html(e);e=t.find("img").length;e<=10?t.addClass("items10"):e<=20?t.addClass("items20"):e<=30?t.addClass("items30"):t.addClass("items50")})}0!=a.length?(a=a[0],o=document.getElementById(a.getAttribute("data-id")),s(i=o.value),r=""==i?[]:i.split(","),l.addEventListener("click",function(e){e.preventDefault(),e.target.matches("img")&&a.click()}),a.addEventListener("click",function(e){n||(0<r.length&&(t="gallery-edit"),(n=new wp.media.view.emWpGallery({multiple:!0,state:t,library:{order:"ASC",orderby:"title",type:"image",search:null,uploadedTo:null,multiple:!0}})).on("ready",function(){var t;0!=r.length&&(t=n.state().get("library"),wp.media.query({post__in:r}).more().then(),r.forEach(function(e){attachment=wp.media.attachment(e),null!=attachment.attributes&&(attachment.attributes.sizes={medium:{url:roboGalleryFieldGallery.iconUrl}}),attachment.fetch(),t.add(attachment?[attachment]:[])}))}),n.on("open",function(){0!=r.length&&"gallery-edit"!=t&&(n.setState("gallery-edit"),n.options.state="gallery-edit",t="gallery-edit")}),n.on("insert",function(){var e=n.state().get("selection");console.log(e)}),n.on("update",function(e){var t=n.state(),t=e||t.get("selection");if(t){var l=t.toJSON();if(0!=l.length){r=[];for(var a=0;a<l.length;a++)r.push(l[a].id);i=r.join(","),console.log("idsList",i),s(i),o.value=i,console.log("gallery array",r)}}else console.log("return selection")})),n.open()})):console.log("button not found ")}(jQuery);